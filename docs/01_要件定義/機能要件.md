# 受講生管理システム - 機能要件

## 1. 受講生管理

### 1.1 管理する情報

| 項目 | 必須 | 説明 |
|------|:----:|------|
| 氏名 | ✅ | 受講生の氏名 |
| メールアドレス | ✅ | 連絡先メールアドレス |
| 電話番号 | - | 連絡先電話番号 |
| 住所 | - | 住所 |
| 生年月日 | - | 生年月日 |
| 年齢 | - | 生年月日から自動算出 |
| 性別 | - | 性別 |
| 申込経路 | ✅ | どこから申し込みがあったか |
| チャットユーザー名 | - | 外部チャットシステム（Discord/Slack）のユーザー名 |
| 登録日 | ✅ | システムへの登録日（自動） |

### 1.2 受講生の状態

| 状態 | 説明 |
|------|------|
| 仮登録 | 申し込み直後の状態 |
| ヒアリング前 | ヒアリング実施待ちの状態 |
| ヒアリング後 | ヒアリング実施済み、受講準備中の状態 |
| 受講中 | コースを受講している状態 |
| 修了 | コースを修了した状態 |
| 退会 | 途中で退会した状態 |

### 1.3 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| STU-001 | 受講生登録 | 新規受講生の情報を登録する | 管理者、スタッフ |
| STU-002 | 受講生編集 | 受講生の情報を編集する | 管理者、スタッフ |
| STU-003 | 受講生検索 | 名前・状態・コース等で検索する | 管理者、スタッフ、講師 |
| STU-004 | 受講生一覧表示 | 受講生の一覧を表示する | 管理者、スタッフ、講師 |
| STU-005 | 受講生詳細表示 | 受講生の詳細情報を表示する | 管理者、スタッフ、講師 |
| STU-006 | 受講生状態変更 | 受講生の状態を変更する | 管理者、スタッフ |
| STU-007 | 受講生削除 | 受講生の情報を削除する | 管理者 |

---

## 2. コース管理（マスタ）

### 2.1 管理する情報

| 項目 | 必須 | 説明 |
|------|:----:|------|
| コース名 | ✅ | コースの名称 |
| コース説明 | - | コースの概要説明 |
| 料金 | ✅ | 受講料金 |
| 定員 | - | 最大受講人数 |
| 担当講師 | - | コースを担当する講師 |
| 状態 | ✅ | コースの現在の状態 |

### 2.2 コースの状態

| 状態 | 説明 |
|------|------|
| 募集中 | 受講生を募集している状態 |
| 開講中 | コースが開講している状態 |
| 満席 | 定員に達し、募集を停止している状態 |
| 終了 | コースが終了した状態 |

### 2.3 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| CRS-001 | コース登録 | 新規コースを登録する | 管理者、スタッフ |
| CRS-002 | コース編集 | コースの情報を編集する | 管理者、スタッフ |
| CRS-003 | コース一覧表示 | コースの一覧を表示する | 管理者、スタッフ、講師 |
| CRS-004 | コース詳細表示 | コースの詳細情報を表示する | 管理者、スタッフ、講師 |
| CRS-005 | コース状態変更 | コースの状態を変更する | 管理者、スタッフ |
| CRS-006 | コース削除 | コースを削除する | 管理者 |

---

## 3. 受講履歴管理

受講生とコースの紐付けを管理する。

### 3.1 管理する情報

| 項目 | 必須 | 説明 |
|------|:----:|------|
| 受講生 | ✅ | 受講する受講生 |
| コース | ✅ | 受講するコース |
| 受講開始日 | ✅ | コースの受講開始日 |
| 受講終了日 | - | コースの受講終了日 |
| 受講状況 | ✅ | 受講中/修了/退会 |

### 3.2 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| ENR-001 | 受講登録 | 受講生をコースに登録する | 管理者、スタッフ |
| ENR-002 | 受講履歴表示 | 受講生の受講履歴を表示する | 管理者、スタッフ、講師 |
| ENR-003 | 受講状況変更 | 受講状況を変更する（修了、退会等） | 管理者、スタッフ |

---

## 4. 決済管理

### 4.1 管理する情報

| 項目 | 必須 | 説明 |
|------|:----:|------|
| 受講生 | ✅ | 決済対象の受講生 |
| コース | ✅ | 決済対象のコース |
| 金額 | ✅ | 決済金額 |
| 決済期日 | ✅ | 支払い期限 |
| 決済日 | - | 実際に入金された日 |
| 決済状態 | ✅ | 決済の状態 |

### 4.2 決済の状態

| 状態 | 説明 |
|------|------|
| 未払い | まだ入金されていない状態 |
| 入金済み | 入金が完了した状態 |

### 4.3 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| PAY-001 | 決済情報登録 | 決済情報を登録する | 管理者、スタッフ |
| PAY-002 | 決済情報編集 | 決済情報を編集する | 管理者、スタッフ |
| PAY-003 | 決済一覧表示 | 決済情報の一覧を表示する | 管理者、スタッフ |
| PAY-004 | 決済状態変更 | 入金確認後に状態を変更する | 管理者、スタッフ |
| PAY-005 | 未払い一覧表示 | 未払いの決済を一覧表示する | 管理者、スタッフ |

---

## 5. 申込経路管理（マスタ）

### 5.1 申込経路一覧

| カテゴリ | 経路 |
|----------|------|
| Web | 公式サイト |
| 広告 | Google 広告 |
| 広告 | Meta 広告（Facebook/Instagram） |
| 広告 | YouTube 広告 |
| 検索 | 検索エンジン（オーガニック） |
| AI | AI（ChatGPT、Claude 等） |
| SNS | YouTube |
| SNS | Meta（Facebook/Instagram） |
| SNS | X（旧Twitter） |
| 紹介 | 紹介 |
| その他 | イベント |
| その他 | その他 |

### 5.2 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| SRC-001 | 申込経路登録 | 新規申込経路を登録する | 管理者 |
| SRC-002 | 申込経路編集 | 申込経路を編集する | 管理者 |
| SRC-003 | 申込経路一覧表示 | 申込経路の一覧を表示する | 管理者、スタッフ |
| SRC-004 | 経路別集計 | 申込経路別の受講生数を集計する | 管理者、スタッフ |

---

## 6. ユーザー管理（システム利用者）

### 6.1 管理する情報

| 項目 | 必須 | 説明 |
|------|:----:|------|
| ユーザー名 | ✅ | ログイン用のユーザー名 |
| メールアドレス | ✅ | ユーザーのメールアドレス |
| パスワード | ✅ | ログイン用パスワード（ハッシュ化して保存） |
| 氏名 | ✅ | ユーザーの氏名 |
| ロール | ✅ | 管理者/スタッフ/講師 |

### 6.2 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| USR-001 | ログイン | システムにログインする | 全ユーザー |
| USR-002 | ログアウト | システムからログアウトする | 全ユーザー |
| USR-003 | ユーザー登録 | 新規ユーザーを登録する | 管理者 |
| USR-004 | ユーザー編集 | ユーザー情報を編集する | 管理者 |
| USR-005 | ユーザー一覧表示 | ユーザーの一覧を表示する | 管理者 |
| USR-006 | ユーザー削除 | ユーザーを削除する | 管理者 |
| USR-007 | パスワード変更 | 自分のパスワードを変更する | 全ユーザー |

---

## 7. 受講生向け機能

### 7.1 申し込みフォーム

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| APP-001 | 申し込みフォーム表示 | コース一覧と申し込みフォームを表示する | 受講生（未登録） |
| APP-002 | 申し込み情報登録 | 受講生情報とコース選択を登録する | 受講生（未登録） |

### 7.2 ヒアリングフォーム

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| APP-003 | ヒアリングフォーム表示 | ヒアリング項目のフォームを表示する | 受講生（未登録） |
| APP-004 | ヒアリング情報登録 | ヒアリング回答を登録する | 受講生（未登録） |

---

## 8. ヒアリング管理

### 8.1 管理する情報

| 項目 | 必須 | 説明 |
|------|:----:|------|
| 受講生 | ✅ | ヒアリング対象の受講生 |
| ヒアリング項目 | ✅ | ヒアリングの質問項目 |
| 回答内容 | ✅ | 受講生の回答 |
| 回答日時 | ✅ | ヒアリング回答日時（自動） |

### 8.2 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| HRG-001 | ヒアリング情報閲覧 | 受講生のヒアリング回答を閲覧する | 管理者、スタッフ、講師 |
| HRG-002 | ヒアリング項目マスタ管理 | ヒアリングの質問項目を管理する | 管理者 |

---

## 9. メール送付機能

### 9.1 管理する情報

| 項目 | 必須 | 説明 |
|------|:----:|------|
| テンプレート名 | ✅ | メールテンプレートの名称 |
| 件名 | ✅ | メールの件名 |
| 本文 | ✅ | メールの本文（変数埋め込み可能） |
| 送付タイミング | ✅ | 自動送付のトリガー条件 |

### 9.2 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| MAIL-001 | メールテンプレート管理 | メールテンプレートの登録・編集・削除 | 管理者 |
| MAIL-002 | 入金確認メール自動送付 | 入金確認後にヒアリング案内メールを自動送付する | システム（自動） |
| MAIL-003 | テンプレートメール手動送信 | テンプレートを使ってメールを手動送信する | 管理者、スタッフ |
| MAIL-004 | メール送付履歴閲覧 | 送付したメールの履歴を閲覧する | 管理者、スタッフ |

---

## 10. 外部システム連携

### 10.1 連携先システム

| システム | 連携内容 |
|----------|----------|
| 決済システム | カード決済完了通知の受信 |
| チャットシステム（Discord/Slack） | ユーザー名同期、受講開始通知の受信 |

### 10.2 機能一覧

| 機能ID | 機能名 | 説明 | 対象ロール |
|--------|--------|------|------------|
| EXT-001 | 受講開始通知API | 外部システムから受講開始通知を受信し状態を更新する | 外部システム |
| EXT-002 | チャットユーザー名登録API | チャットシステムのユーザー名を登録する | 外部システム |
| EXT-003 | チャットユーザー名変更通知API | チャットシステムでの名前変更を受信し更新する | 外部システム |
| EXT-004 | 決済完了通知API | 決済システムからの決済完了通知を受信する | 外部システム |

---

## 11. 機能優先度

### 優先度：高（MVP）

- 申し込みフォーム・ヒアリングフォーム
- 受講生の編集・一覧・検索・状態管理
- コース（マスタ）の登録・編集・一覧
- 受講履歴の登録・表示
- 決済情報の登録・状態管理
- 入金確認メール自動送付
- 外部システム連携API（受講開始通知、決済完了通知）
- ユーザーのログイン・ログアウト
- ロールベースのアクセス制御

### 優先度：中

- ヒアリング情報の閲覧・管理
- メールテンプレート管理・手動送信
- チャットユーザー名同期API
- 申込経路の管理・集計
- 未払い一覧表示
- ユーザー管理（登録・編集・削除）

### 優先度：低

- 詳細な検索・フィルタリング機能
- メール送付履歴閲覧
- データのエクスポート機能
